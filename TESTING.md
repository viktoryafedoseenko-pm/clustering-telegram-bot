# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/clustering-telegram-bot
python bot.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ: "ü§ñ BOT STARTING..."
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ï—Å–ª–∏ –µ—Å—Ç—å YANDEX_API_KEY - –≤–∏–¥–Ω–æ "‚úÖ Classification module loaded"

**–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä—å `.env` —Ñ–∞–π–ª
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `load_dotenv()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ `logs/bot.log` –∏–ª–∏ `TEMP_DIR/logs/bot.log`

---

### 2. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞

#### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
1. –û—Ç–ø—Ä–∞–≤—å `/start` –±–æ—Ç—É
2. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

#### –¢–µ—Å—Ç 2: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å YandexGPT –∫–ª—é—á–∏)

**–ü–æ–¥–≥–æ—Ç–æ–≤—å —Ç–µ—Å—Ç–æ–≤—ã–π CSV:**
```csv
—Ç–µ–∫—Å—Ç
–ù–µ –º–æ–≥—É –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑
–ì–¥–µ –º–æ–π –∑–∞–∫–∞–∑?
–¢–æ–≤–∞—Ä –ø—Ä–∏—à—ë–ª —Å–ª–æ–º–∞–Ω–Ω—ã–º
–•–æ—á—É –≤–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏
```

**–®–∞–≥–∏:**
1. `/start` ‚Üí "–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä"
2. "–í–≤–µ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
3. –í–≤–µ–¥–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
   ```
   –û–ø–ª–∞—Ç–∞
   –î–æ—Å—Ç–∞–≤–∫–∞
   –ö–∞—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
   ```
4. "–û–±—ã—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è"
5. –û—Ç–ø—Ä–∞–≤—å CSV —Ñ–∞–π–ª

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ—Ç–∞)
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ü–æ–ª—É—á–∞–µ—à—å CSV —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- ‚úÖ –í —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –≤–∏–¥–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

#### –¢–µ—Å—Ç 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–¢–µ—Å—Ç –ø—É—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:**
1. –°–æ–∑–¥–∞–π CSV —Å –ø—É—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏:
   ```csv
   —Ç–µ–∫—Å—Ç
   
   –ù–µ –º–æ–≥—É –æ–ø–ª–∞—Ç–∏—Ç—å
   ```
2. –ü–æ–ø—Ä–æ–±—É–π –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å"
- ‚úÖ –ë–æ—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç

**–¢–µ—Å—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
1. –ü–æ–ø—Ä–æ–±—É–π –≤–≤–µ—Å—Ç–∏ –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–ª–∏ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
2. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

#### –¢–µ—Å—Ç 4: Retry –ª–æ–≥–∏–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º)

**–°–∏–º—É–ª—è—Ü–∏—è rate limit:**
- –ï—Å–ª–∏ API –≤–µ—Ä–Ω—ë—Ç 429, –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
  ```
  Rate limit (429), –∂–¥—ë–º 5 —Å–µ–∫ (–ø–æ–ø—ã—Ç–∫–∞ 1/3)
  ```
- –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
python test_classification_errors.py
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
- ‚úÖ –û–±—ã—á–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ë–∞—Ç—á-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
tail -f logs/bot.log
# –∏–ª–∏
tail -f /tmp/clustering_bot/logs/bot.log
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –ª–æ–≥–∞–º (–Ω–µ `/home/yc-user/logs` –µ—Å–ª–∏ –Ω–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö API
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –±–∞–≥–æ–≤

#### ‚úÖ –ë–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ .env
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤ `.env`
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –∫–ª—é—á–∏ –≤ `.env`

#### ‚úÖ –ë–∞–≥ 2: –ü—É—Ç—å –¥–ª—è –ª–æ–≥–æ–≤
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ù–∞ macOS/–ª–æ–∫–∞–ª—å–Ω–æ –ª–æ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `TEMP_DIR/logs/`
- –ù–µ—Ç –æ—à–∏–±–æ–∫ PermissionError –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

#### ‚úÖ –ë–∞–≥ 3: –ë–ª–æ–∫–∏—Ä—É—é—â–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í–æ –≤—Ä–µ–º—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –ø—Ä–æ –Ω–µ-awaited –∫–æ—Ä—É—Ç–∏–Ω—ã

#### ‚úÖ –ë–∞–≥ 4: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–∞
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ï—Å–ª–∏ `TELEGRAM_BOT_TOKEN` –Ω–µ –∑–∞–¥–∞–Ω, –±–æ—Ç –ø–∞–¥–∞–µ—Ç —Å –ø–æ–Ω—è—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π
- –ù–µ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è —Å `None` —Ç–æ–∫–µ–Ω–æ–º

---

## üêõ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å `.env` —Ñ–∞–π–ª
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `tail -100 logs/bot.log`
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Python 3.11+
4. –ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `YANDEX_API_KEY` –∏ `YANDEX_FOLDER_ID` –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ API
3. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å `test_classification_errors.py`

### –û—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–æ–≤
1. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç CSV (–ø–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `—Ç–µ–∫—Å—Ç`)
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–¥–∏—Ä–æ–≤–∫—É (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å UTF-8)
3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–º–∞–∫—Å. 20 –ú–ë)

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –£—Å–ø–µ—à–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:
```
‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–µ–∫—Å—Ç–æ–≤: 10
‚Ä¢ –ö–∞—Ç–µ–≥–æ—Ä–∏–π: 3
‚Ä¢ –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.95

üìã –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (—Ç–æ–ø-5):
‚Ä¢ –û–ø–ª–∞—Ç–∞: 4 (40.0%)
‚Ä¢ –î–æ—Å—Ç–∞–≤–∫–∞: 3 (30.0%)
‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞: 3 (30.0%)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
```
‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å: 1 (10.0%)
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

- [ ] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–æ—Ç–∞)
- [ ] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- [ ] Retry –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—É—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

